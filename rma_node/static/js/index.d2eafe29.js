(()=>{"use strict";var e,t,r,n,o,a,l={4974:function(e,t,r){var n=r(5813);r(3525);var o=r(9729),a=r(4066),l=r(4864),s=r.n(l),i=r(9067);r(6595),r(8585);var c=r(3128),u=r(2937),p=r(8972);a.createRoot(document.getElementById("root")).render((0,n.jsx)(o.StrictMode,{children:(0,n.jsx)(()=>{let e=`${window.location.protocol}//${window.location.host}/`;console.log("fullURL",e);let[t,r]=(0,o.useState)({name:"",comment:"",lon:"",lat:""}),[a,l]=(0,o.useState)(!1),[m,d]=(0,o.useState)(""),[f,g]=(0,o.useState)({}),[y,h]=(0,o.useState)([]),[b,x]=(0,o.useState)(!1),v=(0,o.useRef)(null),j=(0,o.useRef)(null),_=(0,o.useRef)(null),S=["mgmt_areas","fires","trails","features"],O={version:8,name:"Mapbox Satellite",metadata:{"mapbox:autocomposite":!0,"mapbox:type":"default"},sources:{mapbox:{type:"raster",url:"mapbox://mapbox.satellite",tileSize:256}},sprite:`${e}rma_markers`,glyphs:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",layers:[{id:"background",type:"background",paint:{"background-color":"rgb(4,7,14)"}},{id:"satellite",type:"raster",source:"mapbox","source-layer":"mapbox_satellite_full"}]},w=async()=>{let e={},t=[];for(let r of S)try{let n=await fetch(`/${r}.geojson`),o=await n.json();e[r]=o,o.features.forEach(e=>{if(e.properties.name&&e.geometry){let n={id:crypto.randomUUID(),category:r,geometry:(0,p.A)(e.geometry),name:e.properties.name||""};t.push(n)}})}catch(e){console.error(`Error loading ${r}:`,e)}g(e),h(t.reverse())};(0,o.useEffect)(()=>{j.current||(s().accessToken="pk.eyJ1IjoianZhbnJlZXMiLCJhIjoiY2lzZGRvcmRhMDA0dTJ5cnRrbGRld3l0dCJ9.tYSjHXsUNgl5T6C_mOVyxQ",j.current=new(s()).Map({container:v.current,style:O,bounds:[[-104.9038412198238,39.7975319751109],[-104.79004918230919,39.871401211037465]],fitBoundsOptions:{padding:25}}),window.mapboxMap=j.current,_.current=new i.A({displayControlsDefault:!1,controls:!1}),j.current.addControl(_.current),w(),j.current.on("draw.create",e=>{let t=e.features[0];if("Point"===t.geometry.type){let[e,n]=t.geometry.coordinates;r(t=>({...t,lon:e.toFixed(6),lat:n.toFixed(6)})),_.current.changeMode("simple_select"),x(!1)}}),j.current.on("draw.modechange",e=>{"simple_select"===e.mode&&x(!1)}))},[]),(0,o.useEffect)(()=>{N()},[f]);let C=e=>{r({...t,[e.target.name]:e.target.value})},N=()=>{j.current&&S.forEach(e=>{let t=f[e];if(!t||j.current.getSource(e))return;j.current.addSource(e,{type:"geojson",data:t});let r={id:e,source:e};"fires"===e?(r.type="symbol",r.layout={"icon-image":"fires","icon-size":.6}):"mgmt_areas"===e?(r.type="fill",r.paint={"fill-pattern":"line_pattern","fill-opacity":.15,"fill-outline-color":"hsla(332, 100%, 12%, 1.00)"},r.filter=["==","manager","2"]):"trails"===e?(r.type="line",r.paint={"line-color":"hsla(154, 69%, 14%, 1.00)","line-blur":1,"line-opacity":.7,"line-width":3}):"features"===e&&(r.type="symbol",r.layout={"icon-image":["get","marker"]}),j.current.addLayer(r),("features"===e||"fires"===e)&&(j.current.on("click",e,e=>{let t=e.features[0],r="<h5>"+(t.properties.name||t.properties.fire_name||"Feature")+"</h5>";for(let e in t.properties)"marker"!==e&&(r+="<p><strong>"+e+":</strong> "+t.properties[e]+"</p>");new(s()).Popup().setLngLat(e.lngLat).setHTML(r).addTo(j.current)}),j.current.on("mouseenter",e,()=>{j.current.getCanvas().style.cursor="pointer"}),j.current.on("mouseleave",e,()=>{j.current.getCanvas().style.cursor=""}))})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark fixed-top",children:(0,n.jsx)("div",{className:"container-fluid",children:(0,n.jsx)("a",{className:"navbar-brand",href:"#",children:"Rocky Mountain Arsenal National Wildlife Refuge"})})}),(0,n.jsx)("div",{id:"search_panel",children:(0,n.jsx)("div",{className:"form-group mb-3",children:(0,n.jsx)(c.A,{freeSolo:!0,options:y,groupBy:e=>e.category,getOptionLabel:e=>"string"==typeof e?e:(null==e?void 0:e.name)||"",value:m,onInputChange:(e,t)=>{d(t||"")},onChange:(e,t)=>{(e=>{if(!j.current||!e)return;let t=e.geometry;j.current.fitBounds(t,{padding:50,maxZoom:18});let r=f[e.category];if(r){let n=r.features.find(t=>t.properties.name===e.name);if(n){let e;if("Point"===n.geometry.type)e=n.geometry.coordinates;else{let[r,n,o,a]=t;e=[(r+o)/2,(n+a)/2]}let r="<h5>"+(n.properties.name||n.properties.fire_name||"Feature")+"</h5>";for(let e in n.properties)"marker"!==e&&(r+="<p><strong>"+e+":</strong> "+n.properties[e]+"</p>");new(s()).Popup().setLngLat(e).setHTML(r).addTo(j.current)}}})(t)},renderOption:(e,t)=>(0,o.createElement)("li",{...e,key:t.id},t.name),renderInput:e=>(0,n.jsx)(u.A,{...e,placeholder:"Search Features...",size:"small",fullWidth:!0,variant:"standard",className:"form-control form-control-sm",InputProps:{...e.InputProps,disableUnderline:!0,style:{paddingLeft:"12px",paddingRight:"12px",paddingTop:"8px",paddingBottom:"8px",borderRadius:0}}})})})}),(0,n.jsxs)("div",{id:"add_feat",children:[(0,n.jsx)("h3",{children:"Add Feature"}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("Form submitted:",t);let n={type:"Feature",properties:{name:t.name,comment:t.comment,SOURCE_S_1:"User Submitted",FIRE_YEAR:new Date().getFullYear().toString(),DISCOVERY_:new Date().toISOString().split("T")[0],STAT_CAU_1:"User",CONT_DATE:new Date().toISOString().split("T")[0],FIRE_SIZE:0},geometry:{type:"Point",coordinates:[parseFloat(t.lon),parseFloat(t.lat)]}};f.fires&&(f.fires.features.push(n),j.current&&j.current.getSource("fires")&&j.current.getSource("fires").setData(f.fires));let o={id:crypto.randomUUID(),category:"fires",geometry:(0,p.A)(n.geometry),name:t.name};h(e=>[...e,o]),r({name:"",comment:"",lon:"",lat:""}),l(!0),setTimeout(()=>l(!1),5e3)},className:"p-3",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Name"}),(0,n.jsx)("input",{name:"name",className:"form-control form-control-sm",placeholder:"Name",value:t.name,onChange:C,required:!0,style:{margin:"7px"}})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Comment"}),(0,n.jsx)("input",{name:"comment",className:"form-control form-control-sm",placeholder:"Comment",value:t.comment,onChange:C,required:!0,style:{margin:"7px"}})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Location"}),(0,n.jsx)("button",{type:"button",className:`btn btn-sm ${b?"btn-success":"btn-outline-primary"}`,onClick:()=>{_.current&&j.current&&(b?(_.current.changeMode("simple_select"),x(!1)):(_.current.changeMode("draw_point"),x(!0)))},style:{width:"100%",marginBottom:"10px"},children:b?"âœ“ Drawing Mode Active - Click on Map":"\uD83D\uDCCD Set Location on Map"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Longitude"}),(0,n.jsx)("input",{name:"lon",type:"number",step:"any",className:"form-control form-control-sm",placeholder:"Longitude",value:t.lon,onChange:C,required:!0,style:{margin:"7px"}})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Latitude"}),(0,n.jsx)("input",{name:"lat",type:"number",step:"any",className:"form-control form-control-sm",placeholder:"Latitude",value:t.lat,onChange:C,required:!0,style:{margin:"7px"}})]}),(0,n.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px"},children:(0,n.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm",children:"Submit Feature"})})]}),a&&(0,n.jsx)("div",{id:"post_success",className:"alert alert-success mt-3",children:"Feature submitted successfully!"})]}),(0,n.jsx)("div",{ref:v,id:"map"})]})},{})}))}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return l[e].call(r.exports,r,r.exports,i),r.exports}i.m=l,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(r,n){if(1&n&&(r=this(r)),8&n||"object"==typeof r&&r&&(4&n&&r.__esModule||16&n&&"function"==typeof r.then))return r;var o=Object.create(null);i.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var l=2&n&&r;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach(e=>{a[e]=()=>r[e]});return a.default=()=>r,i.d(o,a),o},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r=[],i.O=(e,t,n,o)=>{if(t){o=o||0;for(var a=r.length;a>0&&r[a-1][2]>o;a--)r[a]=r[a-1];r[a]=[t,n,o];return}for(var l=1/0,a=0;a<r.length;a++){for(var[t,n,o]=r[a],s=!0,c=0;c<t.length;c++)(!1&o||l>=o)&&Object.keys(i.O).every(e=>i.O[e](t[c]))?t.splice(c--,1):(s=!1,o<l&&(l=o));if(s){r.splice(a--,1);var u=n();void 0!==u&&(e=u)}}return e},n={410:0},i.O.j=e=>0===n[e],o=(e,t)=>{var r,o,[a,l,s]=t,c=0;if(a.some(e=>0!==n[e])){for(r in l)i.o(l,r)&&(i.m[r]=l[r]);if(s)var u=s(i)}for(e&&e(t);c<a.length;c++)o=a[c],i.o(n,o)&&n[o]&&n[o][0](),n[o]=0;return i.O(u)},(a=self.webpackChunkrsbuild_react_js=self.webpackChunkrsbuild_react_js||[]).forEach(o.bind(null,0)),a.push=o.bind(null,a.push.bind(a));var c=i.O(void 0,["783","99"],function(){return i(4974)});c=i.O(c)})();